<{$bootstrap}>

<{$jquery}>
<script type="text/javascript" src="<{$xoops_url}>/modules/tadtools/jqueryCookie/jquery.cookie.js"></script>
<script type="text/javascript" src="<{$xoops_url}>/modules/tadtools/multiple-file-upload/jquery.MultiFile.js"></script>
<script type="text/javascript" src="<{$xoops_url}>/modules/tadtools/My97DatePicker/WdatePicker.js"></script>
<script type="text/javascript" src="<{$xoops_url}>/modules/tadnews/class/mColorPicker/javascripts/mColorPicker.js" charset="UTF-8"></script>

<{$jquery_code}>
<{$toolbar}>
<{$formValidator_code}>

<form action="<{$action}>" method="post" id="myForm" name="myForm" enctype="multipart/form-data">
  <div class="row-fluid">
    <h1><{$smarty.const._MD_TADNEWS_ADD_NEWS}></h1>
    <div class="controls controls-row">
      <{$cate_menu}>
      <{$creat_cate_tool}>
      <{$prefix_tag_menu}>
      <input type="text" name="news_title" id="news_title_input" class="validate[required] span6" value="<{$news_title}>" placeholder="<{$smarty.const._MD_TADNEWS_NEWS_TITLE}>">
    </div>
    <div class="controls">
      <{$editor}>
    </div>
  </div>

  <div id="setup_form">
    <div id="<{$jquery_tabs_id}>">
       <ul>
          <li><a href="#fragment-1"><span><{$smarty.const._MD_TADNEWS_TIME_TAB}></span></a></li>
          <li><a href="#fragment-2"><span><{$smarty.const._MD_TADNEWS_PRIVILEGE_TAB}></span></a></li>
          <li><a href="#fragment-3"><span><{$smarty.const._MD_TADNEWS_NEWSPIC_TAB}></span></a></li>
          <li><a href="#fragment-4"><span><{$smarty.const._MD_TADNEWS_FILES_TAB}></span></a></li>
      </ul>

      <div id="fragment-1">
        <div class="row-fluid">

          <div class="span4">
        	 <label><{$smarty.const._MD_TADNEWS_START_DATE}><{$smarty.const._MD_TADNEWS_FOR}></label>
           <input type="text" value="<{$start_day}>" name="start_day" id="start_day" onClick="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss'})" >
          </div>

          <div class="span4">
            <label><{$smarty.const._MD_TADNEWS_END_DATE}><{$smarty.const._MD_TADNEWS_FOR}></label>
            <input type="text" value="<{$end_day}>" name="end_day" id="end_day"  onClick="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss',startDate:'%y-%M-{%d+14} %H:%m:%s'})">
          </div>

          <div class="span4">
        	  <label class="checkbox">
              <input type="checkbox" name="always_top" id="always_top" value="1" <{$always_top_checked}>>
              <{$smarty.const._MD_TADNEWS_ALWAYS_TOP}>
            </label>
            <span id="top_date_input">
              <input type="text" name="always_top_date"  id="always_top_date" size=20 value="<{$always_top_date}>" onClick="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm',startDate:'%y-%M-{%d+14} %H:%m'})" align="absmiddle">
            </span>
          </div>

        </div>
      </div>




      <div id="fragment-2">

        <div class="row-fluid">

          <div class="span3">
            <label><{$smarty.const._MD_TADNEWS_CAN_READ_NEWS_GROUP}><{$smarty.const._MD_TADNEWS_FOR}></label>
            <{$enable_group}>
          </div>

          <div class="span3">
            <label><{$smarty.const._MD_TADNEWS_NEWS_HAVE_READ}><{$smarty.const._MD_TADNEWS_FOR}></label>
            <{$have_read_group}>
          </div>

          <div class="span3">
            <div class="row-fluid">
              <label>
              <{$smarty.const._MD_TADNEWS_NEWS_ENABLE}><{$smarty.const._MD_TADNEWS_FOR}>
              </label>
                <label class="radio inline">
                  <input type="radio" name="enable" value="1" id="enable1" <{$enable_checked1}>><{$smarty.const._MD_TADNEWS_NEWS_ENABLE_OK}>
                </label>
                <label class="radio inline">
                  <input type="radio" name="enable" value="0" id="enable0" <{$enable_checked0}>><{$smarty.const._TADNEWS_NEWS_UNABLE}>
                </label>
            </div>
          </div>

          <div class="span3">
            <div class="row-fluid">
              <label><{$smarty.const._MD_TADNEWS_NEWS_PASSWD}><{$smarty.const._MD_TADNEWS_FOR}></label>
              <input type="text" name="passwd" id="passwd"  class="span12" value="<{$passwd}>">
            </div>
          </div>
        </div>
      </div>


      <div id="fragment-3">
        <script type="text/javascript" src="<{$xoops_url}>/modules/tadnews/class/jquery.upload-1.0.2.min.js"></script>
        <{if $pic}>
          <script type="text/javascript">
            d = new Date();
            $(function() {
              $('#show_pic_css_setup').show();
              $('#upfile2').change(function() {
                $(this).upload('demo_upload.php',{op:'upload' , nsn:'<{$nsn}>'}, function(res) {
                  $('#files_sn').val(res);
                  $.post("demo_upload.php", { op: "get_pic", files_sn: res }, function(data) {
                    $('#demo_cover_pic').css('background-image','url('+data+'?'+d.getTime()+')');
                  });
                }, 'html');
              });
            });
          </script>

        <{else}>

          <{assign var=pic value="<div id='demo_cover_pic' style='width:200px; height:150px; border:1px solid #909090; background-position:left top; background-repeat:no-repeat; background-size:cover; float:right; margin:4px;'></div>"}>

          <script type="text/javascript">
            d = new Date();
            $(function() {
              $('#show_pic_css_setup').hide();
              $('#upfile2').change(function() {
                $(this).upload('demo_upload.php',{op:'upload' , nsn:'<{$nsn}>'}, function(res) {
                  $('#show_pic_css_setup').show();
                  $('#files_sn').val(res);

                  $.post("demo_upload.php", { op: "get_pic", files_sn: res }, function(data) {
                    $('#demo_cover_pic').css('background-image','url('+data+'?'+d.getTime()+')');
                  });
                }, 'html');
              });
            });
          </script>

        <{/if}>

        <input type="hidden" name="files_sn" id="files_sn" value="<{$files_sn}>">
        <div class="row-fluid">
          <div class="span6">
            <label><{$smarty.const._MD_TADNEWS_NEWS_PIC}></label>
            <input id="upfile2" type="file" name="upfile2" multiple>
          </div>
        </div>

        <div id="show_pic_css_setup" class="row-fluid">
          <div class="row-fluid">
            <div class="span6">
              <label><{$smarty.const._MD_TADNEWS_ENABLE_NEWSPIC}></label>
              <select class="span12" name="pic_css[use_pic_css]" id="pic_css">
                <option value="" <{$use_pic_css}>><{$smarty.const._MD_TADNEWS_ENABLE_NEWSPIC_NO}></option>
                <option value="true" <{$use_pic_css_true}>><{$smarty.const._MD_TADNEWS_ENABLE_NEWSPIC_YES}></option>
              </select>
            </div>
          </div>

          <div id="pic_css_set" class="well">
            <div class="row-fluid">

              <div class="span3">
                <label>
                <{$smarty.const._MD_TADNEWS_NEWSPIC_WIDTH}>
                </label>
                <input type="text" name="pic_css[width]" value="<{$pic_css_width}>" class="span3" onChange="$('#demo_cover_pic').css('width',this.value+'px');"> x
                <input type="text" name="pic_css[height]" value="<{$pic_css_height}>" class="span3" onChange="$('#demo_cover_pic').css('height',this.value+'px');"> px
              </div>

              <div class="span2">
                <label><{$smarty.const._MD_TADNEWS_NEWSPIC_BORDER_STYTLE}></label>
                <select class="span12" name="pic_css[border_style]" onChange="$('#demo_cover_pic').css('border-style',this.value);">

                  <option value="solid" <{$pic_css_border_style_solid}>><{$smarty.const._MD_TADNEWS_NEWSPIC_SOLID}> </option>
                  <option value="dashed" <{$pic_css_border_style_dashed}>><{$smarty.const._MD_TADNEWS_NEWSPIC_DASHED}></option>
                  <option value="double" <{$pic_css_border_style_double}>><{$smarty.const._MD_TADNEWS_NEWSPIC_DOUBLE}></option>
                  <option value="dotted" <{$pic_css_border_style_dotted}>><{$smarty.const._MD_TADNEWS_NEWSPIC_DOTTED}></option>
                  <option value="groove" <{$pic_css_border_style_groove}>><{$smarty.const._MD_TADNEWS_NEWSPIC_GROOVE}></option>
                  <option value="ridge" <{$pic_css_border_style_ridge}>><{$smarty.const._MD_TADNEWS_NEWSPIC_RIDGE}></option>
                  <option value="inset" <{$pic_css_border_style_inset}>><{$smarty.const._MD_TADNEWS_NEWSPIC_INSET}></option>
                  <option value="outset" <{$pic_css_border_style_outset}>><{$smarty.const._MD_TADNEWS_NEWSPIC_OUTSET}></option>
                  <option value="none" <{$pic_css_border_style_none}>><{$smarty.const._MD_TADNEWS_NEWSPIC_NONE}></option>
                </select>
              </div>

              <div class="span3">
                <label><{$smarty.const._MD_TADNEWS_NEWSPIC_BORDER}><{$smarty.const._MD_TADNEWS_NEWSPIC_BORDER_WIDTH}></label>
                <input type="text" name="pic_css[border_width]" value="<{$pic_css_border_width}>" class="span4" onChange="$('#demo_cover_pic').css('border-width',this.value+'px');"> px
              </div>

              <div class="span3">
                <label><{$smarty.const._MD_TADNEWS_NEWSPIC_FLOAT}></label>
                <select class="span12" name="pic_css[float]" onChange="$('#demo_cover_pic').css('float',this.value);">
                  <option value="left" <{$pic_css_float_left}>><{$smarty.const._MD_TADNEWS_NEWSPIC_FLOAT_LEFT}></option>
                  <option value="right" <{$pic_css_float_right}>><{$smarty.const._MD_TADNEWS_NEWSPIC_FLOAT_RIGHT}></option>
                  <option value="none" <{$pic_css_float_none}>><{$smarty.const._MD_TADNEWS_NEWSPIC_FLOAT_NONE}></option>
                </select>
              </div>

              <div class="span1">
                <label><{$smarty.const._MD_TADNEWS_NEWSPIC_BORDER_COLOR}></label>
                <input type="color" name="pic_css[border_color]" id="border_color" value="<{$pic_css_border_color}>" data-text="hidden" data-hex="true" style="height:20px;width:20px;" onChange="$('#demo_cover_pic').css('border-color',this.value);" />
              </div>
            </div>

            <div class="row-fluid">
              <div class="span3">
                <label><{$smarty.const._MD_TADNEWS_NEWSPIC}></label>
                <select class="span12" name="pic_css[background_repeat]" onChange="$('#demo_cover_pic').css('background-repeat',this.value);">
                  <option value="no-repeat" <{$pic_css_background_repeat_no_repeat}>><{$smarty.const._MD_TADNEWS_NEWSPIC_NO_REPEAT}></option>
                  <option value="repeat" <{$pic_css_background_repeat_repeat}>><{$smarty.const._MD_TADNEWS_NEWSPIC_REPEAT}></option>
                  <option value="repeat-x" <{$pic_css_background_repeat_x}>><{$smarty.const._MD_TADNEWS_NEWSPIC_X_REPEAT}></option>
                  <option value="repeat-y" <{$pic_css_background_repeat_y}>><{$smarty.const._MD_TADNEWS_NEWSPIC_Y_REPEAT}></option>
                </select>
              </div>

              <div class="span2">
                <label><{$smarty.const._MD_TADNEWS_NEWSPIC_SHOW}></label>
                <select class="span12" name="pic_css[background_position]" onChange="$('#demo_cover_pic').css('background-position',this.value);">
                  <option value="left top" <{$pic_css_background_position_left_top}>><{$smarty.const._MD_TADNEWS_NEWSPIC_LEFT_TOP}></option>
                  <option value="left center" <{$pic_css_background_position_left_center}>><{$smarty.const._MD_TADNEWS_NEWSPIC_LEFT_CENTER}></option>
                  <option value="left bottom" <{$pic_css_background_position_left_bottom}>><{$smarty.const._MD_TADNEWS_NEWSPIC_LEFT_BOTTOM}></option>
                  <option value="right top" <{$pic_css_background_position_right_top}>><{$smarty.const._MD_TADNEWS_NEWSPIC_RIGHT_TOP}></option>
                  <option value="right center" <{$pic_css_background_position_right_center}>><{$smarty.const._MD_TADNEWS_NEWSPIC_RIGHT_CENTER}></option>
                  <option value="right bottom" <{$pic_css_background_position_right_bottom}>><{$smarty.const._MD_TADNEWS_NEWSPIC_RIGHT_BOTTOM}></option>
                  <option value="center top" <{$pic_css_background_position_center_top}>><{$smarty.const._MD_TADNEWS_NEWSPIC_CENTER_TOP}></option>
                  <option value="center center" <{$pic_css_background_position_center_center}>><{$smarty.const._MD_TADNEWS_NEWSPIC_CENTER_CENTER}></option>
                  <option value="center bottom" <{$pic_css_background_position_center_bottom}>><{$smarty.const._MD_TADNEWS_NEWSPIC_CENTER_BOTTOM}></option>
                </select>
              </div>

              <div class="span5">
                <label><{$smarty.const._MD_TADNEWS_NEWSPIC_AND}></label>
                <select class="span12" name="pic_css[background_size]" onChange="$('#demo_cover_pic').css('background-size',this.value);">
                  <option value="" <{$pic_css_background_size}>><{$smarty.const._MD_TADNEWS_NEWSPIC_NO_RESIZE}></option>
                  <option value="contain" <{$pic_css_background_size_contain}>><{$smarty.const._MD_TADNEWS_NEWSPIC_CONTAIN}></option>
                  <option value="cover" <{$pic_css_background_size_cover}>><{$smarty.const._MD_TADNEWS_NEWSPIC_COVER}></option>
                </select>
              </div>


              <div class="span2">
                <label><{$smarty.const._MD_TADNEWS_NEWSPIC_MARGIN}></label>
                <input type="text" name="pic_css[margin]" value="<{$pic_css_margin}>" class="span6" onChange="$('#demo_cover_pic').css('margin',this.value + 'px');"> px
              </div>


            </div>

            <div class="row-fluid">
              <div class="span12 well">
               <{$pic}>
               <{$smarty.const._MD_TADNEWS_NEWSPIC_DEMO}>
              </div>
            </div>
          </div>
        </div>


      </div>

      <div id="fragment-4">
        <label><{$smarty.const._MD_TADNEWS_NEWS_FILES}></label>
        <{$upform}>
      </div>
    </div>
  </div>



  <div class="row-fluid">
    <div class="form-actions">
      <div class="span12 text-right">
        <div class="controls">
          <input type="hidden" name="nsn" value="<{$nsn}>">
          <input type="hidden" name="uid" value="<{$uid}>">
          <input type="hidden" name="op" value="<{$op}>">
          <button class="btn btn-success" type="button" id="show_input_form"><{$smarty.const._MD_TADNEWS_ADV_SETUP}></button>
          <button class="btn" type="submit"><{$smarty.const._MD_TADNEWS_SAVE_NEWS}></button>
        </div>
      </div>
    </div>
  </div>
</form>